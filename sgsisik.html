<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ladang Sungai Sisik - Plantation and Agronomy Report</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .details-content { display: none; }
        .details-content.active { display: block; }
        .dropdown-btn.active { background-color: #4a5568; }
        .policy-item { border-left: 3px solid #6366f1; padding-left: 1rem; margin-top: 0.75rem; }
        .modal { display: none; }
        .modal.active { display: flex; }
        .chart-container { position: relative; height: 300px; width: 100%; margin: auto; }
        .pie-chart-container { position: relative; height: 350px; width: 100%; margin: auto; }
        @keyframes fade-in {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in {
            animation: fade-in 0.5s ease-out forwards;
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800">

    <!-- Header -->
    <header class="bg-white shadow-md">
        <nav class="container mx-auto px-6 py-4 flex items-center justify-between">
            <div class="text-xl font-bold text-gray-900">
                <a href="index.html" class="flex items-center">
                    Ladang Sungai Sisik Report
                </a>
            </div>
            <a href="estates.html" class="text-indigo-600 hover:text-indigo-800 transition duration-300">&larr; Back to Estates List</a>
        </nav>
    </header>

    <!-- Main container for the report -->
    <div class="container mx-auto p-4 md:p-8">
        <div id="selected-estate-container" class="grid grid-cols-1 gap-8">
             <!-- Content will be generated by JavaScript -->
        </div>
    </div>
    
    <!-- Modal for displaying policy details -->
    <div id="policyModal" class="modal fixed inset-0 bg-black bg-opacity-50 z-50 items-center justify-center p-4">
        <div class="bg-white p-6 rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] flex flex-col">
            <div class="flex justify-between items-center mb-4">
                <h3 id="modalTitle" class="text-2xl font-bold">Agricultural Policy Cross-Reference</h3>
                <button onclick="closePolicyModal()" class="text-gray-500 hover:text-gray-800 text-2xl font-bold">&times;</button>
            </div>
            <div id="modalContent" class="space-y-4 overflow-y-auto pr-4 flex-grow">
                <!-- Modal content will be populated by JavaScript -->
            </div>
        </div>
    </div>

    <!-- Main script for application logic -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- DATA STORE ---
            const estateData = {
                "id": "sgsisik",
                "name": "Ladang Sungai Sisik",
                "reportInfo": "Data based on Agronomy Report 1/2025 (Visit: 17th June 2025) and Plantation Advisory Report 1-2025 (June 2025).",
                "summaryMetrics": {
                    "area": { "title": "Estate Area", "lines": ["Total Planted: 1,965.00 ha", "Mature: 1,281.48 ha", "Immature: 612.72 ha", "Replanting: 70.80 ha"] },
                    "yield": { "title": "Yield/Ha (YTD) - Act vs Bud", "lines": ["Actual: 7.57 MT", "Budget: 7.01 MT", "Variance: +8%"], "note": "As of May 2025 (Plantation Advisory)" },
                    "cost": { "title": "FFB Cost/Tonne - Act vs Bud", "lines": ["Actual: RM 233.84", "Status: Below Budget"], "note": "As of May 2025 (Plantation Advisory)" },
                    "weeding": { "title": "Weeding Progress", "value": "Needs Improvement", "note": "Delays in circle & inter-row spraying" },
                    "manuring": { "title": "Manuring Progress", "value": "Slower than Expected", "note": "Mixture B significantly delayed" }
                },
                "keyMetrics": [
                    { "icon": "<svg xmlns='http://www.w3.org/2000/svg' class='h-6 w-6 text-blue-600' fill='none' viewBox='0 0 24 24' stroke='currentColor'><path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z' /></svg>", "label": "Labour Ratio", "value": "1:21 ha" },
                    { "icon": "<svg xmlns='http://www.w3.org/2000/svg' class='h-6 w-6 text-green-600' fill='none' viewBox='0 0 24 24' stroke='currentColor'><path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z' /></svg>", "label": "P&D Status", "value": "Rat damage >10% in PM18I" },
                    { "icon": "<svg xmlns='http://www.w3.org/2000/svg' class='h-6 w-6 text-yellow-600' fill='none' viewBox='0 0 24 24' stroke='currentColor'><path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M13 10V3L4 14h7v7l9-11h-7z' /></svg>", "label": "OER %", "value": "15.83%" },
                    { "icon": "<svg xmlns='http://www.w3.org/2000/svg' class='h-6 w-6 text-red-600' fill='none' viewBox='0 0 24 24' stroke='currentColor'><path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z' /></svg>", "label": "Harvest Rounds", "value": "Avg. 9.0 To Date" },
                    { "icon": "<svg xmlns='http://www.w3.org/2000/svg' class='h-6 w-6 text-purple-600' fill='none' viewBox='0 0 24 24' stroke='currentColor'><path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z' /></svg>", "label": "Harvest Interval", "value": "Inconsistent (>15 Days)" },
                    { "icon": "<svg xmlns='http://www.w3.org/2000/svg' class='h-6 w-6 text-teal-600' fill='none' viewBox='0 0 24 24' stroke='currentColor'><path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M17.657 18.343A8 8 0 016.343 7.029m11.314 11.314a8 8 0 01-11.314-11.314m2.121 13.435a2 2 0 01-2.828 0l-2.122-2.121a2 2 0 010-2.828l5.656-5.657a2 2 0 012.829 0l2.121 2.121a2 2 0 010 2.828l-5.657 5.657z' /></svg>", "label": "Nutrient Status", "value": "Mg & N Deficiencies Noted" }
                ],
                "chartData": {
                    "production": {
                        "labels": ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
                        "ffb": [0, 0, 0, 0, 6.62, 0, 0, 0, 0, 0, 0, 0], // FFB data is YTD, so only May has a value
                        "rainfall": [233, 301, 585, 1043, 237, 0, 0, 0, 0, 0, 0, 0],
                        "note": "*Monthly Production & Rainfall data as of May 2025 (Agronomy Report)."
                    },
                    "ageProfile": {
                        "labels": ["0-3 Yrs (Immature)", "4-7 Yrs (Young Mature)", "8-19 Yrs (Young Mature)", "20-25 Yrs (Old Mature)", ">26 Yrs (Old Mature)"],
                        "data": [32, 43, 0, 3, 21],
                        "title": "Sg. Sisik Palm Age Distribution (%)",
                        "note": "*Age distribution based on planting year (Agronomy Report, Pg. 10)."
                    }
                },
                "observations": [
                    "<b>Manuring Delays:</b> The manuring program is slower than expected, with Mixture B application significantly delayed by 2-4 months in some blocks, potentially impacting nutrient uptake. (Agronomy Report, Pg. 12-14)",
                    "<b>Inconsistent Harvesting Interval:</b> Harvesting intervals have been inconsistent and frequently exceed the 15-day standard across both old and young mature blocks, leading to potential yield loss. (Agronomy Report, Pg. 16, 27)",
                    "<b>Nutrient Deficiencies:</b> Young mature palms, especially in hilly areas, show symptoms of Magnesium (Mg) and Nitrogen (N) deficiency. (Agronomy Report, Pg. 31-32)",
                    "<b>Weeding & Accessibility:</b> Delays in circle and inter-row spraying have led to weed growth. Poor road conditions in some hilly areas (PM15A-3) make them inaccessible for harvesting and manuring. (Agronomy Report, Pg. 40, 48)",
                    "<b>Pest & Disease:</b> Rat damage in block PM18I is at 11%, exceeding the 10% action threshold. Old bagworm attacks were noted in PM15A-1, requiring vigilant monitoring. (Agronomy Report, Pg. 50, 52)",
                    "<b>Labour Shortage:</b> The estate is critically short of spraying workers, which has delayed circle spraying and needs to be addressed immediately. (Plantation Advisory Report, Pg. 11, 60)"
                ],
                "reports": {
                    "agronomy": {
                        "Executive Summary": "The first agronomy visit for 2025 was conducted on June 17th. The visit focused on key agronomic practices and identifying yield-limiting factors. Key issues identified include delays in manuring, inconsistent harvesting intervals, nutrient deficiencies in young mature areas, and pest infestations requiring action. Yield to-date is 11% higher than the previous year, but young mature plantings are still below potential. (Agronomy Report, Pg. 4-7, 63)",
                        "Nutrient Inputs/Progress of Manuring": "Manuring progress for 2025 is slower than expected. Mixture B application is significantly delayed (by up to 4 months in PM15A3). ARP broadcasting is scheduled for June-August. Delays in replanting have also postponed CIRP and CRF applications. The quality of fertilizer application was generally acceptable, but monitoring is needed. (Agronomy Report, Pg. 11-15)",
                        "Agronomic Observation": "<b>Old Mature (PM95E, PM96F, etc.):</b> Harvesting intervals are inconsistent, exceeding 15 days. Canopy is fair but slightly under-pruned in some areas with improper frond stacking. Ground vegetation is acceptable, but some circle spraying is delayed. (Agronomy Report, Pg. 16-26)<br><b>Young Mature (PM15A, PM18I, etc.):</b> Harvesting intervals are also inconsistent. Palms in hilly areas show Mg and N deficiencies. Pruning quality is generally satisfactory, but frond stacking is inconsistent. Circle and inter-row spraying are behind schedule, with VOPs and broadleaf weeds present. Some hilly areas are inaccessible due to poor roads. (Agronomy Report, Pg. 27-49)<br><b>Immature (PR22L, PR23B, PR24C):</b> Palm appearance is acceptable. Ground upkeep is fair, but spraying delays have allowed weeds and Mucuna to grow in palm circles. Rhinoceros beetle (RB) attacks in PR22L and PR24C are at 13% and 11% respectively, requiring continuous monitoring. (Agronomy Report, Pg. 54-59)",
                        "Yield Performance": "As of May 2025, the estate achieved 6.62 mt/ha, an 11% improvement from the same period last year, mainly attributed to young mature plantings. However, yields in PM15A have not improved due to inaccessibility in hilly areas causing crop loss. Several blocks have not met the target for harvesting rounds. (Agronomy Report, Pg. 62-64)",
                        "Fertilizer Recommendation": "The fertilizer recommendations for 2025 remain unchanged as detailed in the previous report's appendix. The 2026 fertilizer program will be formulated in the next report. (Agronomy Report, Pg. 65)"
                    },
                    "plantation": {
                        "Executive Summary": "The estate has adequate harvesters, but their productivity needs monitoring. There is a critical shortage of spraying workers, and recruitment is essential. It is recommended to use Inter Pump or CDA for circle spraying to improve productivity. A special round of selective spraying is needed to eradicate VOPs. The manuring program and road maintenance must be completed before the rainy season. Under-pruned palms need correction, and supervision of basal pruning must be improved. Harvester outturn and monitoring of working hours are crucial for achieving crop targets. All replanting areas must be well-maintained and manuring programs completed. (Plantation Advisory Report, Pg. 60-61)",
                        "Area Statement": "The mature area has increased to 1,281.48 ha, and the immature area is 612.72 ha. A replanting of 70.80 ha is scheduled for 2025. (Plantation Advisory Report, Pg. 10)",
                        "Labour Statement": "The estate has a shortage of 12 weeding workers and 3 manuring workers. The worker-to-land ratio is 1:21 ha. (Plantation Advisory Report, Pg. 11)",
                        "Staff Establishment": "The staff complement is adequate, with some recent transfers and appointments. (Plantation Advisory Report, Pg. 12)",
                        "General Charges": "General charges are 39% under budget and are under control. (Plantation Advisory Report, Pg. 13)",
                        "Upkeep & Cultivation": "Circle spraying is behind schedule, with 73% of the mature area completed. Selective spraying is also behind at 61%. Manuring is 80% complete but delayed. Road grading is only 29% complete. Pruning is 70% complete, but there are issues with under-pruning and poor basal pruning. (Plantation Advisory Report, Pg. 14, 15, 19, 23, 29, 32)",
                        "Harvesting and Collection": "Harvesting and collection costs are acceptable. The estate achieved 9 out of 10 harvesting rounds, with an average interval of 16 days. Harvester outturn is unsatisfactory at 68%. (Plantation Advisory Report, Pg. 37)",
                        "Crop Production": "Year-to-date yield is 7.57 tons/ha, which is 8% above budget and 11% higher than the previous year. Bunch weights have generally increased compared to 2024. (Plantation Advisory Report, Pg. 40, 41)",
                        "Production Cost": "The cost of production is acceptable and below budget at RM 233.84/Tonne FFB. (Plantation Advisory Report, Pg. 43)",
                        "Vehicles Running Cost": "Vehicle running costs are in line with the budget. (Plantation Advisory Report, Pg. 44)",
                        "Capital Expenditure": "Capital expenditure is underspent. (Plantation Advisory Report, Pg. 45)",
                        "Immature": "PR23 (232.71 ha): Weeding and manuring are complete. Some areas have thick Mucuna climbing on palms, and there are spots of hardpan that require EFB application. Oryctes infestations are minimal. Supplying is complete. (Plantation Advisory Report, Pg. 46-49)<br>PR22 (183.32 ha): Circle spraying is complete and acceptable. Inter-rows are clean due to thick covers. Manuring is complete, and palm appearance is satisfactory. Oryctes infestations are minimal. Basal pruning is planned for July, and scout harvesting has commenced. (Plantation Advisory Report, Pg. 50-53)<br>PR24 (196.69 ha): Cover planting is in progress. Palm planting was completed in April, and palm appearance is satisfactory. Circle spraying is 67% complete, and selective spraying is 47% complete. Pest control for Oryctes, nettle caterpillars, and apogonia has been carried out. (Plantation Advisory Report, Pg. 54-56)<br>PR25 (70.80 ha): Felling and chipping were completed in April. Construction of camber bunds is in progress. (Plantation Advisory Report, Pg. 57-59)"
                    },
                    "pinfosys": {
                        "CEO Financial Summary": "N/A",
                        "Summary of Oil Palm Expenditure": "N/A"
                    }
                },
                "policy": "<p>Policy cross-references are not yet available for this estate.</p>"
            };

            let chartInstances = {};
            const container = document.getElementById('selected-estate-container');

            function renderEstate() {
                container.innerHTML = createEstateHTML(estateData);
                setTimeout(() => {
                    initializeChartsForEstate();
                    populateInternalDropdowns();
                    attachEventListeners();
                }, 0);
            }

            function createEstateHTML(estate) {
                const summaryMetricsHTML = Object.values(estate.summaryMetrics).map(metric => {
                    const colorClass = metric.title.includes('Area') ? 'bg-blue-50 text-blue-800' : 
                                       metric.title.includes('Yield') ? 'bg-green-50 text-green-800' :
                                       metric.title.includes('Cost') ? 'bg-red-50 text-red-800' :
                                       metric.title.includes('Weeding') ? 'bg-yellow-50 text-yellow-800' : 'bg-purple-50 text-purple-800';
                    let contentHTML = '';
                    if (metric.lines) {
                        contentHTML = metric.lines.map(line => `<p class="text-sm font-semibold">${line}</p>`).join('');
                    } else {
                        contentHTML = `<p class="text-2xl font-bold">${metric.value}</p>`;
                    }
                    
                    return `
                        <div class="p-4 rounded-lg ${colorClass}">
                            <h3 class="font-bold mb-1">${metric.title}</h3>
                            ${contentHTML}
                            <p class="text-xs text-gray-500 mt-1">${metric.note}</p>
                        </div>`;
                }).join('');

                const keyMetricsHTML = estate.keyMetrics.map(metric => `
                    <div class="flex items-center space-x-3 bg-gray-50 p-3 rounded-lg">
                        <div class="bg-gray-100 p-2 rounded-full">${metric.icon}</div>
                        <div><p class="text-sm text-gray-500">${metric.label}</p><p class="font-bold text-lg">${metric.value}</p></div>
                    </div>`).join('');

                const observationsHTML = estate.observations.map(obs => `<li class="ml-4">${obs}</li>`).join('');

                return `
                    <div class="bg-white p-6 rounded-lg shadow-lg animate-fade-in">
                        <h2 class="text-3xl font-bold mb-2 text-gray-900">${estate.name}</h2>
                        <p class="text-sm text-gray-500 mb-6 italic">${estate.reportInfo}</p>
                        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4 mb-8">${summaryMetricsHTML}</div>
                        <div class="mb-8"><h3 class="text-xl font-semibold mb-4 border-b pb-2">Key Metrics & Agronomic Status</h3><div class="grid grid-cols-2 md:grid-cols-3 gap-4 mt-4">${keyMetricsHTML}</div></div>
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
                            <div><h3 class="text-xl font-semibold mb-2">Monthly Production vs Rainfall</h3><div class="chart-container"><canvas id="prodChart-${estate.id}"></canvas></div><p class="text-xs text-center text-gray-500 mt-2">${estate.chartData.production.note}</p></div>
                            <div><h3 class="text-xl font-semibold mb-2">Palm Age Profile</h3><div class="pie-chart-container"><canvas id="ageChart-${estate.id}"></canvas></div><p class="text-xs text-center text-gray-500 mt-2">${estate.chartData.ageProfile.note}</p></div>
                        </div>
                        <div class="mb-8"><h3 class="text-xl font-semibold mb-2 border-b pb-2">Key Observations & Issues</h3><ul class="list-disc list-inside space-y-2 text-gray-700 mt-4">${observationsHTML}</ul></div>
                        <div class="mb-8 text-center"><button class="policy-modal-btn bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition shadow-md">View Agricultural Policy Cross-Reference</button></div>
                        <div class="space-y-2">
                            <button data-dropdown-id="${estate.id}-agronomy" class="dropdown-btn w-full text-left bg-gray-800 text-white p-3 rounded-md hover:bg-gray-700 transition">Agronomy Report Details</button>
                            <div id="${estate.id}-agronomy" class="details-content bg-gray-50 p-4 rounded-md border border-gray-200"></div>
                            <button data-dropdown-id="${estate.id}-plantation" class="dropdown-btn w-full text-left bg-gray-800 text-white p-3 rounded-md hover:bg-gray-700 transition">Plantation Advisory Report Details</button>
                            <div id="${estate.id}-plantation" class="details-content bg-gray-50 p-4 rounded-md border border-gray-200"></div>
                             <button data-dropdown-id="${estate.id}-pinfosys" class="dropdown-btn w-full text-left bg-gray-800 text-white p-3 rounded-md hover:bg-gray-700 transition">Pinfosys Report Details</button>
                            <div id="${estate.id}-pinfosys" class="details-content bg-gray-50 p-4 rounded-md border border-gray-200"></div>
                       </div>
                    </div>`;
            }

            function initializeChartsForEstate() {
                const prodCanvasId = `prodChart-${estateData.id}`;
                const ageCanvasId = `ageChart-${estateData.id}`;
                if (chartInstances[prodCanvasId]) chartInstances[prodCanvasId].destroy();
                if (chartInstances[ageCanvasId]) chartInstances[ageCanvasId].destroy();

                const prodCtx = document.getElementById(prodCanvasId)?.getContext('2d');
                if(prodCtx) {
                    chartInstances[prodCanvasId] = new Chart(prodCtx, {
                        type: 'bar',
                        data: {
                            labels: estateData.chartData.production.labels,
                            datasets: [
                                { label: 'FFB Production (MT/Ha)', data: estateData.chartData.production.ffb, type: 'line', borderColor: '#c026d3', backgroundColor: 'transparent', yAxisID: 'y-ffb', tension: 0.4 },
                                { label: 'Rainfall (mm)', data: estateData.chartData.production.rainfall, backgroundColor: '#3b82f6', yAxisID: 'y-rainfall' }
                            ]
                        },
                        options: { responsive: true, maintainAspectRatio: false, scales: { x: { grid: { display: false } }, 'y-ffb': { type: 'linear', position: 'left', title: { display: true, text: 'FFB Production (MT/Ha)' } }, 'y-rainfall': { type: 'linear', position: 'right', title: { display: true, text: 'Rainfall (mm)' }, grid: { drawOnChartArea: false } } } }
                    });
                }

                const ageCtx = document.getElementById(ageCanvasId)?.getContext('2d');
                if(ageCtx) {
                    chartInstances[ageCanvasId] = new Chart(ageCtx, {
                        type: 'pie',
                        data: {
                            labels: estateData.chartData.ageProfile.labels,
                            datasets: [{ data: estateData.chartData.ageProfile.data, backgroundColor: ['#3b82f6', '#16a34a', '#f97316', '#ef4444', '#8b5cf6'], hoverOffset: 4 }]
                        },
                        options: { responsive: true, maintainAspectRatio: false, plugins: { title: { display: true, text: estateData.chartData.ageProfile.title, font: { size: 16 } }, legend: { position: 'right' } } }
                    });
                }
            }
            
            function populateInternalDropdowns() {
                const agronomyDiv = document.getElementById(`${estateData.id}-agronomy`);
                const plantationDiv = document.getElementById(`${estateData.id}-plantation`);
                const pinfosysDiv = document.getElementById(`${estateData.id}-pinfosys`);

                if (agronomyDiv && estateData.reports.agronomy) {
                    agronomyDiv.innerHTML = Object.entries(estateData.reports.agronomy).map(([section, content]) => `<h4 class="font-semibold mt-2 text-gray-800">${section}:</h4><p class="text-sm text-gray-600">${content}</p>`).join('');
                }
                if (plantationDiv && estateData.reports.plantation) {
                    plantationDiv.innerHTML = Object.entries(estateData.reports.plantation).map(([section, content]) => `<h4 class="font-semibold mt-2 text-gray-800">${section}:</h4><p class="text-sm text-gray-600">${content}</p>`).join('');
                }
                 if (pinfosysDiv && estateData.reports.pinfosys) {
                    pinfosysDiv.innerHTML = Object.entries(estateData.reports.pinfosys).map(([section, content]) => `<h4 class="font-semibold mt-2 text-gray-800">${section}:</h4><p class="text-sm text-gray-600">${content}</p>`).join('');
                }
            }

            function attachEventListeners() {
                container.querySelectorAll('.dropdown-btn').forEach(button => {
                    button.addEventListener('click', (event) => {
                        const id = event.currentTarget.dataset.dropdownId;
                        const content = document.getElementById(id);
                        content.classList.toggle('active');
                        event.currentTarget.classList.toggle('active');
                    });
                });
                container.querySelector('.policy-modal-btn')?.addEventListener('click', openPolicyModal);
            }

            renderEstate();
        });
        
        function openPolicyModal() {
            const modalTitle = document.getElementById('modalTitle');
            const modalContent = document.getElementById('modalContent');
           const estateData = {
                "id": "sgsisik",
                "name": "Ladang Sungai Sisik",
                "reportInfo": "Data based on Agronomy Report 1/2025 (Visit: 17th June 2025) and Plantation Advisory Report 1-2025 (June 2025).",
                "policy": "<p>Policy cross-references are not yet available for this estate.</p>"
            };
            modalTitle.innerText = `Agricultural Policy Cross-Reference: ${estateData.name}`;
            modalContent.innerHTML = estateData.policy;
            document.getElementById('policyModal').classList.add('active');
        }

        function closePolicyModal() {
            document.getElementById('policyModal').classList.remove('active');
        }
    </script>
</body>
</html>
