<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ladang Batu Sablas - Plantation and Agronomy Report</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .details-content { display: none; }
        .details-content.active { display: block; }
        .dropdown-btn.active { background-color: #14532d; }
        .policy-item { border-left: 3px solid #16a34a; padding-left: 1rem; margin-top: 0.75rem; }
        .modal { display: none; }
        .modal.active { display: flex; }
        .chart-container { position: relative; height: 300px; width: 100%; margin: auto; }
        .pie-chart-container { position: relative; height: 350px; width: 100%; margin: auto; }
        .observation-ref { font-size: 0.75rem; color: #57534e; font-style: italic; }
        @keyframes fade-in {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in {
            animation: fade-in 0.5s ease-out forwards;
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800">

    <!-- Header -->
    <header class="bg-white shadow-md">
        <nav class="container mx-auto px-6 py-4 flex items-center justify-between">
            <div class="text-xl font-bold text-gray-900">
                <a href="index.html" class="flex items-center">
                    Ladang Batu Sablas Report
                </a>
            </div>
            <a href="estates.html" class="text-green-800 hover:text-green-900 transition duration-300">&larr; Back to Estates List</a>
        </nav>
    </header>

    <!-- Main container for the report -->
    <div class="container mx-auto p-4 md:p-8">
        <div id="selected-estate-container" class="grid grid-cols-1 gap-8">
             <!-- Content will be generated by JavaScript -->
        </div>
    </div>
    
    <!-- Modal for displaying policy details -->
    <div id="policyModal" class="modal fixed inset-0 bg-black bg-opacity-50 z-50 items-center justify-center p-4">
        <div class="bg-white p-6 rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] flex flex-col">
            <div class="flex justify-between items-center mb-4">
                <h3 id="modalTitle" class="text-2xl font-bold">Agricultural Policy Cross-Reference</h3>
                <button onclick="closePolicyModal()" class="text-gray-500 hover:text-gray-800 text-2xl font-bold">&times;</button>
            </div>
            <div id="modalContent" class="space-y-4 overflow-y-auto pr-4 flex-grow">
                <!-- Modal content will be populated by JavaScript -->
            </div>
        </div>
    </div>

    <!-- Main script for application logic -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- DATA STORE ---
            const estateData = {
                "id": "batusablas",
                "name": "Ladang Batu Sablas",
                "reportInfo": "Data based on PA Report 2/2025 (Visit Date: 30th Dec 2025) & Agronomy Report 2/2025 (October 2025).",
                "summaryMetrics": {
                    "area": { "title": "Estate Area", "lines": ["Mature: 464.00 ha", "Total: 484.99 ha"] },
                    "yield": { "title": "Yield/Ha (Actual / Budget)", "value": "19.06 / 22.55 MT", "note": "15% Below Budget (YTD Nov)" },
                    "cost": { "title": "Key Rates", "value": "RM 65-68", "note": "Avg Earning/Man-Day" },
                    "weeding": { "title": "Weeding Progress", "value": "Satisfactory", "note": "100% Completed" },
                    "manuring": { "title": "Manuring Progress", "value": "100% Completed", "note": "Program Completed (Nov)" }
                },
                "keyMetrics": [
                    { "icon": "<svg xmlns='http://www.w3.org/2000/svg' class='h-6 w-6 text-blue-600' fill='none' viewBox='0 0 24 24' stroke='currentColor'><path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z' /></svg>", "label": "Labour Ratio", "value": "1:14 ha (Adequate)" },
                    { "icon": "<svg xmlns='http://www.w3.org/2000/svg' class='h-6 w-6 text-red-600' fill='none' viewBox='0 0 24 24' stroke='currentColor'><path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z' /></svg>", "label": "P&D Status", "value": "Bagworm & Ganoderma" },
                    { "icon": "<svg xmlns='http://www.w3.org/2000/svg' class='h-6 w-6 text-yellow-600' fill='none' viewBox='0 0 24 24' stroke='currentColor'><path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M13 10V3L4 14h7v7l9-11h-7z' /></svg>", "label": "Harvest Interval", "value": "22 Days (Poor)" },
                    { "icon": "<svg xmlns='http://www.w3.org/2000/svg' class='h-6 w-6 text-red-600' fill='none' viewBox='0 0 24 24' stroke='currentColor'><path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z' /></svg>", "label": "Harvester Outturn", "value": "71% (Low)" },
                    { "icon": "<svg xmlns='http://www.w3.org/2000/svg' class='h-6 w-6 text-purple-600' fill='none' viewBox='0 0 24 24' stroke='currentColor'><path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z' /></svg>", "label": "Weeding", "value": "Woodies in Ravines" },
                    { "icon": "<svg xmlns='http://www.w3.org/2000/svg' class='h-6 w-6 text-teal-600' fill='none' viewBox='0 0 24 24' stroke='currentColor'><path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M17.657 18.343A8 8 0 016.343 7.029m11.314 11.314a8 8 0 01-11.314-11.314m2.121 13.435a2 2 0 01-2.828 0l-2.122-2.121a2 2 0 010-2.828l5.656-5.657a2 2 0 012.829 0l2.121 2.121a2 2 0 010 2.828l-5.657 5.657z' /></svg>", "label": "Pruning", "value": "Satisfactory" }
                ],
                "chartData": {
                    "production": {
                        "labels": ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep"],
                        "ffb": [673.28, 694.85, 765.53, 663.46, 806.38, 718.92, 917.86, 701.25, 768.16],
                        "rainfall": [87.3, 117.7, 109.0, 352.0, 192.0, 83.0, 46.0, 120.0, 178.0],
                        "note": "*Monthly data retained from Agronomy Report. Annual trend consistent with PA Report summary."
                    },
                    "ageProfile": {
                        "labels": ["Old (P98, P02) - 32%", "Prime (P11, P12, P13) - 68%"],
                        "data": [148, 316],
                        "title": "Batu Sablas Palm Age Profile",
                        "note": "*Mature Area: 464 Ha"
                    }
                },
                "observations": [
                    "<b>Extended Harvesting Intervals:</b> Average interval is 22 days (Target <15 days). This is the main issue impacting crop recovery. <span class='observation-ref'>(PA 2/2025, Pg. 29)</span>",
                    "<b>Low Harvester Outturn:</b> Outturn recorded at 71%, attributed to late wage payments by contractor and water supply issues. <span class='observation-ref'>(PA 2/2025, Pg. 29)</span>",
                    "<b>Bagworm Infestation:</b> Widespread infestations in P11/A, P13/A, P13/B, and P11/B, mainly confined to roadsides. <span class='observation-ref'>(PA 2/2025, Pg. 20; AR Pg. 21)</span>",
                    "<b>Vegetation in Ravines:</b> While inter-rows are clean, overgrown VOPs and jungle woodies are prevalent in ravines (P12/B) and hilltops (P98). <span class='observation-ref'>(PA 2/2025, Pg. 14)</span>",
                    "<b>Ganoderma Infection:</b> Sporadic infections seen in P11/B. Deboling recommended. <span class='observation-ref'>(PA 2/2025, Pg. 20)</span>",
                    "<b>Manuring Completed:</b> 100% of the manuring program (2317 ha coverage) was completed by November. <span class='observation-ref'>(PA 2/2025, Pg. 19)</span>"
                ],
                "reports": {
                    "agronomy": { 
                        "Executive Summary": "Harvesting intervals are high (>20 days) due to labor shortages, impacting crop recovery. Manuring is 81% complete but delayed by rain. Bagworm infestation persists but is being managed. Yield YTD Sept 2025 is 14.46 MT/ha (deficit of 4.13% vs 2024). (AR Pg. 4-5, 29)",
                        "Nutrient Inputs/Progress of Manuring": "Mixture A (87%), Mixture B (75%), Kieserite (100%), RP (100%). Overall progress is 81%. Rain interference caused delays. Expected completion by mid-November. (AR Pg. 9)",
                        "Agronomic Observation": "Palm vigor generally acceptable. Pruning is 100% completed and satisfactory. Weeding is acceptable with inter-row and circle weeding on schedule. Bagworm active in P11/P12/P13. Ganoderma spreading. (AR Pg. 11, 15, 17, 21, 31)",
                        "Yield Performance": "YTD Sept 2025 Yield: 14.46 MT/ha (vs 15.23 MT/ha in 2024). Crop recovery unsatisfactory; cumulative harvesting rounds (10.75) are only 60% of target (18 rounds). (AR Pg. 29-30)",
                        "Fertilizer Recommendation": "The 2026 program has been drawn up. NK mixtures recommended for production; Kieserite and RP for correction. Program attached in Appendix 1. (AR Pg. 33)"
                    },
                    "plantation": { 
                        "Executive Summary": "The estate is generally in satisfactory condition, though labor management requires improvement. Key focus areas include eliminating harvester turnover to stabilize the workforce and improving harvester outturn (currently 71%). Productivity in spraying operations also needs enhancement. The estate successfully completed 100% of its manuring and weeding programs for the period. Immediate attention is required for bagworm outbreaks in specific blocks and ensuring road grading is followed by compaction in the next financial year. (Source: PA 2/2025, Pg. 6, 33-34)",
                        "Area Statement": "Total Estate Acreage: 484.99 ha.<br><b>Mature Oil Palm (464.00 ha):</b><br>- P1998: 74.00 ha<br>- P2002: 74.00 ha<br>- P2011A: 47.00 ha<br>- P2011B: 64.00 ha<br>- P2012A: 44.00 ha<br>- P2012B: 64.00 ha<br>- P2013A: 51.00 ha<br>- P2013B: 46.00 ha<br><b>Other Areas:</b><br>- Rock Area/Building/Roads: 16.00 ha<br>- Vacant Land: 4.99 ha.<br>No changes to the area statement were noted. (Source: PA 2/2025, Pg. 8)",
                        "Labour Statement": "<b>Total Workforce:</b> Required 34, Actual 33 (Shortage: 1).<br><b>Breakdown:</b><br>- Harvesters/Pruners: 23 (Adequate)<br>- Loaders/Drivers: 2 (Short 1)<br>- Weeding (Field): 3 (Short 1)<br>- Manuring: 3 (Short 1)<br>- Security: 2 (Surplus 2)<br><b>Issues:</b> High harvester turnover was previously driven by late salary payments from contractors. The estate has since taken over direct payment to stabilize the workforce. Manuring/Spraying gangs need recruitment of 2 workers to cover shortages. (Source: PA 2/2025, Pg. 9)",
                        "Staff Establishment": "<b>Manager:</b> Mr. Robin A/L Sinnappanah.<br><b>Field Supervisors:</b> Mr. Vivekgan A/L Gopal, En. Muhamad Sahrizal Bin Sahran, En. Mohammad Isma Azam Mohd Zuraidy.<br><b>Office Clerk:</b> Cik Juriah binti Osman.<br><b>Movements:</b> Mr. Kogulan transferred to Grancia Estate (April). Mr. Vivekgan promoted to Field Supervisor (April). En. Mohd. Isma promoted from Head Mandore (June). Staff establishment is deemed adequate. (Source: PA 2/2025, Pg. 10)",
                        "General Charges": "N/A",
                        "Upkeep and Cultivation": "<b>Circle Spraying:</b> 100% completed (918 ha). Productivity at 3.3 ha/man-day is below the potential of 5 ha/man-day. Circles are generally clean.<br><b>Selective Spraying:</b> 100% completed (1244 ha). Inter-rows are clean, but ravines (P12/B) and hilltops (P98) show overgrown VOPs/woodies. Chemical usage (Garlon/Ally) was considered excessive (4.6 pumps/ha) relative to the clean conditions.<br><b>Manuring:</b> 100% completed (2317 ha applied). Application done via wheelbarrows with satisfactory output (30 bags/man-day).<br><b>Pest & Disease:</b> Widespread bagworm infestations in P11/A, P13/A, P13/B, and P11/B (roadsides). Sporadic Ganoderma in P11/B requires de-boling. Cattle intrusion remains unresolved.<br><b>Roads:</b> Grading budget unutilized as compaction was not budgeted; strategy adjusted to perform both in Q1 2026.<br><b>Pruning:</b> 100% completed (5104 ha). Visual appearance satisfactory, though some unpruned palms remain in inaccessible ravines (P12/B). (Source: PA 2/2025, Pg. 11-27)",
                        "Harvesting and Collection": "<b>Performance:</b> Harvesting interval is poor at 22 days (Target: <15 days). Harvester outturn is low at 71%, affected by water supply issues and past wage disputes.<br><b>Mechanization:</b> 4 Mini Dumpers utilized, accessible to only 161 ha. Poor access/terraces in P98 and P02 impede productivity.<br><b>Bunch Weight:</b> General drop in bunch weights observed in 2025 (e.g., P1998 dropped from 23.10kg to 20.15kg).<br><b>Loose Fruits:</b> Collection standards are unsatisfactory and require tighter supervision. (Source: PA 2/2025, Pg. 28-30)",
                        "Crop Production": "<b>YTD Yield:</b> 19.06 MT/ha vs Budget 22.55 MT/ha (-15%).<br><b>Comparison:</b> Yield is 5% lower than the same period in 2024 (20.01 MT/ha).<br><b>Factors:</b> Shortfall attributed to harvester shortages earlier in the year and low cropping patterns.<br><b>Field Breakdown (Yield):</b><br>- P2011A: 17.77 MT/ha (-16.8% vs 2024)<br>- P2011B: 18.83 MT/ha (-16% vs 2024)<br>- P2013A: 19.62 MT/ha (+11% vs 2024)<br>- P2013B: 22.50 MT/ha (+11.9% vs 2024). (Source: PA 2/2025, Pg. 28)",
                        "Production Cost": "<b>Harvesting Rates:</b><br>- P1998: RM 37.00/ton<br>- P2002: RM 38.00/ton<br>- P2011-2013: RM 32.00/ton<br><b>Earnings:</b> Harvester average daily earnings range from RM 50.56 (P2011) to RM 67.71 (P1998). Many harvesters struggle to earn the basic wage due to low productivity.<br><b>In-field Collection:</b> Mini Dumper rate RM 6.00/ton (Avg earning RM 84/day). (Source: PA 2/2025, Pg. 30)",
                        "Vehicles Running Cost": "N/A",
                        "Capital Expenditure": "N/A",
                        "Immature": "N/A"
                    },
                    "pinfosys": "Not Available"
                },
                "policy": "<p>No specific policy cross-references were available in the provided reports.</p>"
            };

            let chartInstances = {};
            const container = document.getElementById('selected-estate-container');

            function renderEstate() {
                container.innerHTML = createEstateHTML(estateData);
                setTimeout(() => {
                    initializeChartsForEstate();
                    populateInternalDropdowns();
                    attachEventListeners();
                }, 0);
            }

            function createEstateHTML(estate) {
                const summaryMetricsHTML = Object.values(estate.summaryMetrics).map(metric => {
                    const colorClass = metric.title.includes('Area') ? 'bg-blue-50 text-blue-800' : 
                                       metric.title.includes('Yield') ? 'bg-green-50 text-green-800' :
                                       metric.title.includes('Cost') ? 'bg-orange-50 text-orange-800' :
                                       metric.title.includes('Weeding') ? 'bg-yellow-50 text-yellow-800' : 'bg-purple-50 text-purple-800';
                    if (metric.lines) {
                        return `<div class="p-4 rounded-lg ${colorClass}"><h3 class="font-semibold">${metric.title}</h3>${metric.lines.map(line => `<p class="text-sm">${line}</p>`).join('')}</div>`;
                    }
                    return `<div class="p-4 rounded-lg ${colorClass}"><h3 class="font-semibold">${metric.title}</h3><p class="text-2xl font-bold">${metric.value}</p><p class="text-xs text-gray-500 mt-1">${metric.note}</p></div>`;
                }).join('');

                const keyMetricsHTML = estate.keyMetrics.map(metric => `
                    <div class="flex items-center space-x-3 bg-gray-50 p-3 rounded-lg">
                        <div class="bg-gray-100 p-2 rounded-full">${metric.icon}</div>
                        <div><p class="text-sm text-gray-500">${metric.label}</p><p class="font-bold text-lg">${metric.value}</p></div>
                    </div>`).join('');

                const observationsHTML = estate.observations.map(obs => `<li class="ml-4">${obs}</li>`).join('');

                return `
                    <div class="bg-white p-6 rounded-lg shadow-lg animate-fade-in">
                        <h2 class="text-3xl font-bold mb-2 text-gray-900">${estate.name}</h2>
                        <p class="text-sm text-gray-500 mb-6 italic">${estate.reportInfo}</p>
                        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4 mb-8">${summaryMetricsHTML}</div>
                        <div class="mb-8"><h3 class="text-xl font-semibold mb-4 border-b pb-2">Key Metrics & Agronomic Status</h3><div class="grid grid-cols-2 md:grid-cols-3 gap-4 mt-4">${keyMetricsHTML}</div></div>
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
                            <div><h3 class="text-xl font-semibold mb-2">Production vs Rainfall (2025)</h3><div class="chart-container"><canvas id="prodChart-${estate.id}"></canvas></div><p class="text-xs text-center text-gray-500 mt-2">${estate.chartData.production.note}</p></div>
                            <div><h3 class="text-xl font-semibold mb-2">Palm Age Profile</h3><div class="pie-chart-container"><canvas id="ageChart-${estate.id}"></canvas></div><p class="text-xs text-center text-gray-500 mt-2">${estate.chartData.ageProfile.note}</p></div>
                        </div>
                        <div class="mb-8"><h3 class="text-xl font-semibold mb-2 border-b pb-2">Key Observations & Issues</h3><ul class="list-disc list-inside space-y-2 text-gray-700 mt-4">${observationsHTML}</ul></div>
                        <div class="mb-8 text-center"><button class="policy-modal-btn bg-green-800 text-white px-6 py-3 rounded-lg hover:bg-green-900 transition shadow-md">View Agricultural Policy Cross-Reference</button></div>
                        <div class="space-y-2">
                            <button data-dropdown-id="${estate.id}-agronomy" class="dropdown-btn w-full text-left bg-gray-800 text-white p-3 rounded-md hover:bg-gray-700 transition">Agronomy Report Details</button>
                            <div id="${estate.id}-agronomy" class="details-content bg-gray-50 p-4 rounded-md border border-gray-200"></div>
                            <button data-dropdown-id="${estate.id}-plantation" class="dropdown-btn w-full text-left bg-gray-800 text-white p-3 rounded-md hover:bg-gray-700 transition">Plantation Advisory Report Details</button>
                            <div id="${estate.id}-plantation" class="details-content bg-gray-50 p-4 rounded-md border border-gray-200"></div>
                            <button data-dropdown-id="${estate.id}-pinfosys" class="dropdown-btn w-full text-left bg-gray-800 text-white p-3 rounded-md hover:bg-gray-700 transition">Pinfosys Report Details</button>
                            <div id="${estate.id}-pinfosys" class="details-content bg-gray-50 p-4 rounded-md border border-gray-200"></div>
                        </div>
                    </div>`;
            }

            function initializeChartsForEstate() {
                const prodCanvasId = `prodChart-${estateData.id}`;
                const ageCanvasId = `ageChart-${estateData.id}`;
                if (chartInstances[prodCanvasId]) chartInstances[prodCanvasId].destroy();
                if (chartInstances[ageCanvasId]) chartInstances[ageCanvasId].destroy();

                const prodCtx = document.getElementById(prodCanvasId)?.getContext('2d');
                if(prodCtx) {
                    chartInstances[prodCanvasId] = new Chart(prodCtx, {
                        type: 'bar',
                        data: {
                            labels: estateData.chartData.production.labels,
                            datasets: [
                                { label: 'FFB Production (MT)', data: estateData.chartData.production.ffb, type: 'line', borderColor: '#ca8a04', backgroundColor: 'transparent', yAxisID: 'y-ffb', tension: 0.4 },
                                { label: 'Rainfall (mm)', data: estateData.chartData.production.rainfall, backgroundColor: '#3b82f6', yAxisID: 'y-rainfall' }
                            ]
                        },
                        options: { responsive: true, maintainAspectRatio: false, scales: { x: { grid: { display: false } }, 'y-ffb': { type: 'linear', position: 'left', title: { display: true, text: 'FFB Production (MT)' } }, 'y-rainfall': { type: 'linear', position: 'right', title: { display: true, text: 'Rainfall (mm)' }, grid: { drawOnChartArea: false } } } }
                    });
                }

                const ageCtx = document.getElementById(ageCanvasId)?.getContext('2d');
                if(ageCtx) {
                    chartInstances[ageCanvasId] = new Chart(ageCtx, {
                        type: 'pie',
                        data: {
                            labels: estateData.chartData.ageProfile.labels,
                            datasets: [{ data: estateData.chartData.ageProfile.data, backgroundColor: ['#4CAF50', '#2196F3', '#FFC107', '#F44336', '#9C27B0'], hoverOffset: 4 }]
                        },
                        options: { responsive: true, maintainAspectRatio: false, plugins: { title: { display: true, text: estateData.chartData.ageProfile.title, font: { size: 16 } }, legend: { position: 'right' } } }
                    });
                }
            }
            
            function populateInternalDropdowns() {
                const agronomyDiv = document.getElementById(`${estateData.id}-agronomy`);
                const plantationDiv = document.getElementById(`${estateData.id}-plantation`);
                const pinfosysDiv = document.getElementById(`${estateData.id}-pinfosys`);

                if (agronomyDiv && estateData.reports.agronomy) {
                    agronomyDiv.innerHTML = Object.entries(estateData.reports.agronomy).map(([section, content]) => `<h4 class="font-semibold mt-2 text-gray-800">${section}:</h4><p class="text-sm text-gray-600">${content}</p>`).join('');
                }
                if (plantationDiv && estateData.reports.plantation) {
                    plantationDiv.innerHTML = Object.entries(estateData.reports.plantation).map(([section, content]) => `<h4 class="font-semibold mt-2 text-gray-800">${section}:</h4><p class="text-sm text-gray-600">${content}</p>`).join('');
                }
                if (pinfosysDiv) {
                    pinfosysDiv.innerHTML = `<p class="text-sm text-gray-600">${estateData.reports.pinfosys}</p>`;
                }
            }

            function attachEventListeners() {
                container.querySelectorAll('.dropdown-btn').forEach(button => {
                    button.addEventListener('click', (event) => {
                        const id = event.currentTarget.dataset.dropdownId;
                        const content = document.getElementById(id);
                        content.classList.toggle('active');
                        event.currentTarget.classList.toggle('active');
                    });
                });
                container.querySelector('.policy-modal-btn')?.addEventListener('click', openPolicyModal);
            }

            renderEstate();
        });
        
        function openPolicyModal() {
            const modalTitle = document.getElementById('modalTitle');
            const modalContent = document.getElementById('modalContent');
            const estateData = {"name":"Ladang Batu Sablas","policy":"<p>No specific policy cross-references were available in the provided reports.</p>"};
            modalTitle.innerText = `Agricultural Policy Cross-Reference: ${estateData.name}`;
            modalContent.innerHTML = estateData.policy;
            document.getElementById('policyModal').classList.add('active');
        }

        function closePolicyModal() {
            document.getElementById('policyModal').classList.remove('active');
        }
    </script>
</body>
</html>
